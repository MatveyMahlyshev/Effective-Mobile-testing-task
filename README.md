# Effective-Mobile-testing-tast
Тестовое задание на роль Junior Python Developer.

# Запуск
1. Устанавливаем докер.
2. Клонируем репозиторий на копмьютер.
3. Запускаем проект с помощью команды "docker compose up --build"
4. Переходим по адресу "http://127.0.0.1:8000/docs"

# Работа системы
При запуске скачаются все необходимые зависимости. 
Автоматически создаётся суперпользователь.(login=admin@admin.com, password=adminadmin)
Автоматически создаются сертификаты для JWT.
И далее уже можно тестировать работу системы. 

# Permissions
У пользователей есть  3 уровня доступа к эндпоинтам.

1 уровень - обычный пользователь, который может зарегистрироваться, войти, удалить аккаунт, обновить данные в аккаунте, а также с помощью refresh токена обновляется его access токен.

2 уровень - модератор. Он может делать всё то же самое, что и обычный пользователь, но может взаимодействовать с эндпоинтами, к которым у него есть права и к которым у обычных пользователей прав нет.

3 уровень - администратор. У него есть доступ практически ко всем эндпоинтам системы. Почему практически? Потому что, если пользователь имеет права администратора и не является суперпользователем(is_superuser=False), то он не имеет права изменять права доступа обычным пользователями. Если же он всё таки суперпользователь, то он имеет доступ ко всем эндпоинтам, и имеет право изменять уровни доступа у всех других пользователей.

# Эндпоинты

В рамках тестового задания были разработаны 12 эндпоинтов.

# MOCK-VIEWS
Это просто словари, которые возвращаются в зависимости от прав доступа.

1 эндпоинт - все типы пользователей имеют к нему доступ.
2 эндпоинт - только модераторы и админы имеют доступ.
3 эндпоинт - только админы имеют доступ.

# USERS

1 эндпоинт - регистрация обычного пользователя(регистрации администратора или модератора нет).
2 эндпоинт - обновление данных аккаунта. Есть доступ у всех.
3 эндпоинт - мягкое удаление аккаунта. Запись в бд остаётся, флаг is_active = false.

# AUTH

1 эндпоинт - логин пользователя через email и password.
2 эндпоинт - обновление access токена по refresh токену. если токен истёк, то происходит logout.
3 эндпоинт - выход. Access и refresh токены отправляются в бд в список использованных.

# ADMIN

1 эндпоинт - получение списка пользователей.(для админов и модераторов)
2 эндпоинт - получение пользователя по id(для админов и модераторов).
3 эндпоинт - изменение уровней доступа(доступно только для аккаунта суперпользователя).
